*У меня очень ограниченный опыт работы с docker и тестирования программ, которые используют http.*

# Запуск

1. `docker compose up backend` для запуска бэкэнда;
2. `docker compose up test` для запуска тестов;

# Описание

docker-compose.yaml содержит описание четырех сервисов:
1. postgres разворачивает базу данных и проверяет, что она доступна;
2. liquibase отвечает за меграции, при первом запуске создает в базе таблицу с нужной структурой;
3. backend запускает сервер, ниже есть подробное описание его работы;
4. test запускает тесты.

## Принцип работы сервера

Сервер принимает два типа запросов:
1. POST запрос по эндпоинту `/bank`, который работает так, как описано в тз.
2. GET запрос по эндпоинту `/total`, который возвращает текущую сумму на счете.

Когда сервер получает запрос по эндпоинту `/bank`, его сначала получает middleware, которое определяет необходимое действие по заголовку.

# Очевидные проблемы

1. Все вычисления проводятся с переменной `.total`, из-за этого сервер не может корректно обрабатывать несколько запросов одновременно. В тз на этот счет не было указаний, очевидным решением было бы добавить мьютекс, или каждый раз получать значение из базы.
2. Сервер доступен по `[::]:8080`, но недоступен по `localhost:8080`. Это проблема должна решатся несложно, но мне решение найти не удалось.
3. (Концептуальная проблема) В данный момент сервер использует базу и систему управления миграциями для хранения одного единственного значения.
4. Тесты используют ту же базу, что и сервер. Я использую транзакции для того, чтобы тесты не влияли на <<настоящие>> данные, но более безопасным решением было бы завести отдельную базу для тестов.
5. Несмотря на то, что я использую транзакции, которые явно откатываю, <<настоящие>> данные таки портятся. Я меняю их обратно руками, решения лучше придумать не успеваю.
6. Я использую отдельный сервис для запуска тестов, не уверен, что это соответвует best practies.